const a=['https://gitee.com/api/v5/user/repos','fail-authorize','close','[easy-git]\x20axios\x20request\x20::','&response_type=code','response','redirect','\x20发生异常。','http','login','setStatusBarMessage','getUserOrgs','openExternal','projects','https://gitee.com/oauth/authorize','ssh','window','success','application/vnd.github.v3+json','md5','code','easy-git:\x20获取Github访问凭证异常，请稍后再试，或反馈给开发者。','info','easygit-auth2021','token-error','服务器返回:\x20','https://github.com/login/oauth/access_token','easy-git:\x20获取gitee\x20token失败。','/orgs','mkdirSync','处理uri异常。','hbuilderx://requestExtension/easy-git?source=gitee','orgs','client_id','getUserInfo','c0a45b8d480ea8bec9ef46c5e34f4f54b75ca0afed3e39da1ff7fed1b4238e33ceb8a2576a83478dda50fb523259dbf1','writeFile','拒绝授权后，无法在easy-git内使用创建远程仓库等功能，请知悉。','return\x20/\x22\x20+\x20this\x20+\x20\x22/','authorize','setButtonStatus','ECONNABORTED','easy-git:\x20获取Gitee访问凭证成功。','round','utf-8','easy-git','utf8','?client_id=','repo','create','showInformationMessage','https访问地址：','error','Github：身份信息无效，或权限不够，请重新授权认证。','token_type','获取github身份信息失败，请重新认证。','授权成功','433c3c5240b790d0ef7d4f119a2c31d7312b02120f82c80829719a4d2382190e','status','easy-git:\x20获取Github\x20token失败，请重新授权认证。','获取gitee身份信息失败，请重新认证。','displayError','.github','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','读取授权数据，代码运行异常，请反馈给开发者。','https','https://api.github.com/user','.gitee','refresh_token','return\x20(function()\x20','&client_id=','map','machineIdSync','您还未授权过github，请点击账号连接进行授权。','获取gitee\x20token失败，请重新授权。','&redirect_uri=','readFileSync','错误：token无效，请重新授权。','env','log','trace',':\x20服务器返回，','读取token失败，请重新授权。','已授权，但是没有创建仓库权限，请重新授权。','final','createDecipheriv','node-machine-id','appData','length','未解析到有效参数，操作中止，请联系开发者。','gitee','https://api.github.com/user/orgs','permission-denied','aes256','getToken','get','./utils.js','assign','debug','https://gitee.com/api/v5/user?access_token=','您还未授权过gitee，请点击账号连接进行授权。','ETIMEDOUT','hbuilderx','{}.constructor(\x22return\x20this\x22)(\x20)','?grant_type=authorization_code&code=','ssh访问地址：','apply','html_url','no-authorize','post','success-authorize','console','https://gitee.com/oauth/token?grant_type=refresh_token&refresh_token=','获取Github访问凭证异常，请稍后再试，请反馈给开发者。','开始创建','错误日志:\x20','data','access_denied','hex','query','catch','https://github.com/login/oauth/authorize','stringify','readLocalToken','oauth','Github网络请求失败，获取token失败，请重新授权。','includes','hbuilderx://requestExtension/easy-git?source=github','existsSync','application/json','getUserRepos','fail','join','split','warn','createHash','scope','path','parse','已授权，但是没有创建仓库权限，请重新授权','compile','update','https://api.github.com/user/repos','digest','then','3fe043259ed4f8f7e4fa','token\x20','我知道了','github','access_token','easy-git:\x20获取Github访问凭证成功。','6d24805b4d7f691af328c11ae02431ad690cba85d6948d938378be7eeaba3e80d463c315cc606aeb48b3563eb228ea09b7909556e8ddd5d13416e1f496dbc436390945899be804478f2d55a48fd103fc','exception','client_secret'];(function(b,c){const d=function(f){while(--f){b['push'](b['shift']());}};const e=function(){const f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(j,k,l,m){m=m||{};let n=k+'='+l;let o=0x0;for(let p=0x0,q=j['length'];p<q;p++){const r=j[p];n+=';\x20'+r;const s=j[r];j['push'](s);q=j['length'];if(s!==!![]){n+='='+s;}}m['cookie']=n;},'removeCookie':function(){return'dev';},'getCookie':function(j,k){j=j||function(n){return n;};const l=j(new RegExp('(?:^|;\x20)'+k['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const m=function(n,o){n(++o);};m(d,c);return l?decodeURIComponent(l[0x1]):undefined;}};const g=function(){const j=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return j['test'](f['removeCookie']['toString']());};f['updateCookie']=g;let h='';const i=f['updateCookie']();if(!i){f['setCookie'](['*'],'counter',0x1);}else if(i){h=f['getCookie'](null,'counter');}else{f['removeCookie']();}};e();}(a,0x186));const b=function(c,d){c=c-0x0;let e=a[c];return e;};const g=function(){let G=!![];return function(H,I){const J=G?function(){if(I){const K=I[b('0x18')](H,arguments);I=null;return K;}}:function(){};G=![];return J;};}();const h=g(this,function(){const G=function(){const H=G['constructor'](b('0x6e'))()[b('0x3a')](b('0x87'));return!H['test'](h);};return G();});h();const i=function(){let G=!![];return function(H,I){const J=G?function(){if(I){const K=I['apply'](H,arguments);I=null;return K;}}:function(){};G=![];return J;};}();const j=i(this,function(){const G=function(){};const H=function(){let J;try{J=Function(b('0x8d')+b('0x15')+');')();}catch(K){J=window;}return J;};const I=H();if(!I[b('0x1d')]){I[b('0x1d')]=function(J){const K={};K[b('0x97')]=J;K['warn']=J;K[b('0x10')]=J;K[b('0x5e')]=J;K['error']=J;K['exception']=J;K['table']=J;K['trace']=J;return K;}(G);}else{I[b('0x1d')][b('0x97')]=G;I[b('0x1d')][b('0x34')]=G;I['console'][b('0x10')]=G;I['console']['info']=G;I[b('0x1d')]['error']=G;I[b('0x1d')][b('0x46')]=G;I[b('0x1d')]['table']=G;I['console'][b('0x98')]=G;}});j();const k=require('os');const l=require('fs');const m=require(b('0x37'));const n=require(b('0x14'));const o=require('crypto');const p=require(b('0x4'));const q=require('axios');const {createOutputChannel}=require(b('0xe'));const r=n[b('0x96')][b('0x5')];const s=b('0x5f');function t(G,H={},I={}){let J={'Accept':b('0x2f'),'content-type':'application/json'};if(JSON['stringify'](I)!='{}'){J=Object[b('0xf')](J,I);};const K=q[b('0x79')]({'timeout':0x30d40,'headers':J});return new Promise((L,M)=>{K[b('0x1b')](G,H)[b('0x3e')](N=>{L(N[b('0x22')]);})[b('0x26')](N=>{if(N['response']){console[b('0x7c')](b('0x4b'),N[b('0x4d')][b('0x22')],N[b('0x4d')][b('0x82')]);M(N[b('0x4d')][b('0x22')]);}else{if(N[b('0x5c')]==b('0x71')){M(b('0x13'));}else{M(N);};};});})[b('0x26')](L=>{return L;});};function u(G){const H=q[b('0x79')]({'timeout':0x1388});return new Promise((I,J)=>{H[b('0xd')](G)['then'](K=>{I(K[b('0x22')]);})[b('0x26')](K=>{J(b('0x31'));});})['catch'](I=>{return I;});};function v(){const G=k['homedir']();const H=p[b('0x90')]({'original':!![]});const I=H+G;return o[b('0x35')](b('0x5b'))[b('0x3b')](I,b('0x76'))['digest'](b('0x24'));};function w(){const G=s;return o[b('0x35')](b('0x5b'))[b('0x3b')](G,b('0x76'))[b('0x3d')](b('0x24'));};function x(G){const H=v();const I=o['createCipheriv'](b('0xb'),H,s);var J=I[b('0x3b')](G,b('0x76'),'hex');J+=I[b('0x2')](b('0x24'));return J;}function y(G,H=![]){let I=H?w():v();const J=o[b('0x3')](b('0xb'),I,s);var K=J[b('0x3b')](G,b('0x24'),'utf8');K+=J['final'](b('0x76'));return K;}function z(G){let H={};let I=G[b('0x33')]('&');for(let J of I){let K=J['split']('=');H[K[0x0]]=K[0x1];};return H;};function A(G,H){const I=m[b('0x32')](r,b('0x75'),b('0x2a'));const J=m['join'](I,G);const K=l['existsSync'](I);if(!K){l[b('0x65')](I);};try{l[b('0x6c')](J,H,function(L){if(L)throw L;});}catch(L){console[b('0x97')](L);};};class B{constructor(){this[b('0x4e')]=b('0x67');this[b('0x69')]=b('0x81');this[b('0x47')]=b('0x45');}['authorize'](G=![]){const H=b('0x56');const I=H+b('0x77')+this['client_id']+b('0x93')+this[b('0x4e')]+b('0x4c');if(G){n[b('0x96')][b('0x54')](I);return undefined;}else{return I;};}async[b('0x53')](G){let H='https://gitee.com/api/v5/users/'+G+b('0x64');let I=await u(H);if(I!=b('0x31')){let J=I[b('0x8f')](K=>K['login']);J['splice'](0x0,0x0,G);return J;}else{return b('0x31');};}async[b('0x6a')](G){if(!G){return;};let H=b('0x11')+G;let I=await u(H);if(I!='fail'){let {login}=I;return login;}else{return b('0x31');};}async[b('0xc')](G,H=''){let I={'login':'','orgs':[]};let J={};if(G&&G[b('0x6')]){if(G[b('0x6')]<0xa){return{'status':b('0x49'),'msg':'获取gitee身份信息失败，请联系开发者。'};};const P=y(this[b('0x47')],!![]);const Q='https://gitee.com/oauth/token';const R=Q+b('0x16')+G+b('0x8e')+this[b('0x69')]+b('0x93')+this['redirect'];let S={'client_secret':P};J=await t(R,S)[b('0x26')](T=>{return T;});if(J=='fail'||!JSON[b('0x28')](J)[b('0x2c')]('access_token')){n[b('0x58')][b('0x52')](b('0x63'),0x2710,b('0x7c'));return{'status':'token-error','msg':b('0x92')};};}else{let T=b('0x1e')+H;J=await t(T)['catch'](U=>{return U;});if(J==b('0x31')||!JSON['stringify'](J)['includes'](b('0x43'))){return{'status':b('0x60'),'msg':'获取gitee\x20token失败，请重新授权。'};};};I['access_token']=J['access_token'];I[b('0x36')]=J[b('0x36')];let {access_token,refresh_token}=J;let K=await this[b('0x6a')](access_token);if(K!=b('0x31')){I[b('0x51')]=K;};let L=await this[b('0x53')](I['login']);if(L!=b('0x31')){I[b('0x68')]=L;};let M=Object[b('0xf')](I,J);if(access_token){M[b('0x43')]=x(access_token);M[b('0x8c')]=x(refresh_token);};A(b('0x8b'),JSON[b('0x28')](M));let {scope}=M;let N=scope&&scope[b('0x2c')](b('0x55'))?b('0x80'):'已授权，但是没有创建仓库权限，请重新授权';let O=scope&&scope[b('0x2c')]('projects')?b('0x1c'):'permission-denied';n[b('0x58')][b('0x52')](b('0x72'),0x2710,b('0x5e'));return Object[b('0xf')]({'status':O,'msg':N},I);}async[b('0x29')](G=![]){const H=m[b('0x32')](r,b('0x75'),b('0x2a'),b('0x8b'));const I=l[b('0x2e')](H);if(!I){return{'status':b('0x1a'),'msg':b('0x12')};};let J=l['readFileSync'](H,b('0x74'));try{let K=JSON[b('0x38')](J);let L=K instanceof Object;if(!L){return{'status':b('0x60'),'msg':b('0x84')};};let {login,orgs,created_at,expires_in,access_token,scope,refresh_token}=K;let M=created_at+expires_in;let N=Math[b('0x73')](new Date()/0x3e8)-0xb4;if(N<M){let O=scope&&scope['includes'](b('0x55'))?'授权成功':b('0x39');let P=scope&&scope['includes']('projects')?b('0x1c'):b('0xa');let Q={'status':P,'msg':O,'scope':scope,'login':login,'orgs':orgs};if(G){Q[b('0x43')]=y(access_token);};return Q;}else{let R=y(refresh_token);return this[b('0xc')]('',R);};}catch(S){createOutputChannel(b('0x88')+S);return{'status':b('0x46'),'msg':'代码运行异常，请反馈给开发者。'};};}async[b('0x30')](){let G={'ssh':[],'https':[]};let H=await this[b('0x29')](!![]);let {status,access_token}=H;if(![b('0x1c'),b('0xa')]['includes'](status)||!access_token){return;};let I='https://gitee.com/api/v5/user/repos?access_token='+access_token+'&per_page=100';let J=await u(I);if(J==b('0x31')){return[];}else{G[b('0x57')]=J[b('0x8f')](K=>K['ssh_url']);G[b('0x89')]=J[b('0x8f')](K=>K[b('0x19')]);return G;};}};class C{constructor(){this[b('0x69')]=b('0x3f');this[b('0x47')]=b('0x6b');this[b('0x4e')]=b('0x2d');this[b('0x36')]='repo';}[b('0x6f')](G=![]){const H=b('0x27');const I=H+'?client_id='+this[b('0x69')]+b('0x93')+this['redirect']+'&scope='+this[b('0x36')];if(G){n[b('0x96')][b('0x54')](I);return undefined;}else{return I;};}async[b('0x6a')](G){let H=b('0x8a');let I={'Authorization':b('0x40')+G};let J=await t(H,{},I)[b('0x26')](K=>{return b('0x31');});if(J!='fail'){let {login}=J;return login;}else{return b('0x31');};}async[b('0x53')](G){let H=b('0x9');let I={'Authorization':b('0x40')+G};let J=await t(user_url,{},I)[b('0x26')](K=>{return b('0x31');});if(J!='fail'){let K=J[b('0x8f')](L=>L[b('0x51')]);return K;}else{return'fail';};}async['getToken'](G){let H={};if(G['length']<0xa){return{'status':b('0x49'),'msg':'获取github身份信息失败，请联系开发者。'};};const I=b('0x62');const J=y(this['client_secret'],!![]);let K={'client_id':this[b('0x69')],'client_secret':J,'code':G};H=await t(I,K)[b('0x26')](L=>{return L;});try{if(H==b('0x13')){let O='easy-git:\x20连接github网络超时，获取Github访问凭证出错，请稍后再试。';return n[b('0x58')][b('0x7a')](O,['我知道了']);};if(!H['includes'](b('0x43'))&&!H['includes'](b('0x36'))&&!H[b('0x2c')](b('0x7e'))){console[b('0x7c')]('[easy-git]\x20Github::',H);n['window']['showInformationMessage'](b('0x83'),[b('0x41')]);return{'status':'token-error','msg':b('0x2b')};};let L=z(H);let {scope,access_token}=L;let M=scope&&scope[b('0x2c')](b('0x78'))?b('0x80'):'已授权，但是没有创建仓库权限，请重新授权。';let N=scope&&scope[b('0x2c')](b('0x78'))?'success-authorize':b('0xa');try{let P=await this[b('0x6a')](access_token);if(P!=undefined||P!=b('0x31')){L=Object[b('0xf')]({'login':P},L);};L['access_token']=x(access_token);}catch(Q){};A(b('0x86'),JSON['stringify'](L));n[b('0x58')][b('0x52')](b('0x44'),0x2710,b('0x5e'));return Object[b('0xf')]({'status':N,'msg':M},L);}catch(R){createOutputChannel(b('0x5d'),b('0x7c'));console[b('0x7c')](R);createOutputChannel(b('0x21')+R,'error');return{'status':'exception','msg':b('0x1f')};};}async[b('0x29')](G=![]){const H=m[b('0x32')](r,'easy-git','oauth');const I=m[b('0x32')](H,'.github');const J=l[b('0x2e')](I);if(!J){return{'status':b('0x1a'),'msg':b('0x91')};};let K=l[b('0x94')](I,b('0x74'));try{let L=JSON[b('0x38')](K);let M=L instanceof Object;if(!M){return{'status':b('0x60'),'msg':b('0x7f')};};let {access_token,scope}=L;if(access_token&&access_token!=''){let N=scope&&scope['includes'](b('0x78'))?b('0x80'):b('0x1');let O=scope&&scope[b('0x2c')](b('0x78'))?b('0x1c'):'permission-denied';let P={'status':O,'msg':N,'scope':scope};if(G){P[b('0x43')]=y(access_token);};return P;}else{return{'status':b('0x49'),'msg':b('0x0')};};}catch(Q){createOutputChannel(b('0x88')+Q);return{'status':b('0x46'),'msg':'代码运行异常，请反馈给开发者。'};};}};function D(G){let H=G instanceof Object;if(!H){let I=JSON[b('0x28')](G);createOutputChannel('处理请求失败。'+I);return b('0x31');}else{n['window'][b('0x52')]('easy-git:\x20处理schema请求成功。',0x61a8,b('0x5e'));};try{let J=G[b('0x37')];let K=G[b('0x25')];let L=z(K);let {source,code,error,error_description}=L;if((code==null||!code||source==null||!source)&&error!=undefined){createOutputChannel(b('0x7'));if(error==b('0x23')){createOutputChannel(source+b('0x61')+error_description+'。',b('0x7c'));createOutputChannel(b('0x6d'),b('0x7c'));};return'fail';}else{n[b('0x58')][b('0x52')]('easy-git:\x20解析schema参数成功。',0x61a8,b('0x5e'));};switch(source){case b('0x8'):let M=new B();M[b('0xc')](code);break;case'github':let N=new C();N[b('0xc')](code);break;default:break;};}catch(O){console[b('0x97')](O);createOutputChannel(b('0x66')+O);};};async function E(G){if(G==b('0x8')){let H=new B();let I=await H[b('0x29')](!![]);let {status,access_token}=I;if(status!=b('0x1c')&&access_token==''){createOutputChannel('Gitee：身份信息无效，或权限不够，请重新授权认证。',b('0x7c'));return b('0x31');};return access_token;}else if(G==b('0x42')){let J=new C();let K=await J[b('0x29')](!![]);let {status,access_token}=K;if(status!='success-authorize'&&access_token==''){createOutputChannel(b('0x7d'),b('0x7c'));return b('0x31');};return access_token;}else{return b('0x31');};};async function F(G,H){let {host,name,isPrivate,isClone,cloneProtocol}=G;let I=await E(host);if(I=='fail'){H[b('0x85')](b('0x95'));H[b('0x70')](b('0x20'),[]);return;}let J='';if(host==b('0x8')){J=b('0x48');};if(host==b('0x42')){J=b('0x3c');};let K={'name':name,'private':isPrivate};let L={};if(host==b('0x42')){L={'Authorization':'token\x20'+I,'Accept':b('0x5a')};};if(host==b('0x8')){K[b('0x43')]=I;}let M=await t(J,K,L)[b('0x26')](N=>{createOutputChannel(host+':\x20创建远程仓库\x20'+name+b('0x4f'),'error');let O=N instanceof Object;if(O){let P=JSON['stringify'](N);createOutputChannel(host+b('0x99')+P,b('0x7c'));};H[b('0x70')](b('0x20'),[]);return;});if(M){H[b('0x70')]('开始创建',[]);let {html_url,ssh_url,clone_url}=M;if(ssh_url==undefined){let N=JSON[b('0x28')](M);createOutputChannel(host+':\x20'+name+'\x20远程仓库创建失败。返回:\x20'+N,'error');return;}else{createOutputChannel(host+':\x20'+name+'\x20远程仓库创建成功。',b('0x59'));H[b('0x4a')]();}if(html_url){createOutputChannel('https访问地址：'+html_url);};if(clone_url){createOutputChannel(b('0x7b')+clone_url);};if(ssh_url){createOutputChannel(b('0x17')+ssh_url+'\x0a\x0a');};if(isClone){const O=require('../view/clone/view_webdialog.js');let P=ssh_url;if(cloneProtocol==b('0x50')){P=clone_url?clone_url:html_url;};O(P);};};}module['exports']={'Gitee':B,'Github':C,'gitRepoCreate':F,'onUriForResponse':D};