const a=['repo','debug','showInformationMessage','Gitee：身份信息无效，或权限不够，请重新授权认证。','appData','splice','错误：token无效，请重新授权。','easy-git:\x20获取Github访问凭证成功。','easygit-auth2021','authorize','then','parse','c0a45b8d480ea8bec9ef46c5e34f4f54b75ca0afed3e39da1ff7fed1b4238e33ceb8a2576a83478dda50fb523259dbf1','?client_id=','readLocalToken','easy-git:\x20获取Github访问凭证异常，请稍后再试，或反馈给开发者。','处理请求失败。','Git授权认证','exports','[easy-git]\x20axios\x20request\x20::','433c3c5240b790d0ef7d4f119a2c31d7312b02120f82c80829719a4d2382190e','&response_type=code','服务器返回:\x20','https://gitee.com/api/v5/user?access_token=','warn',':\x20创建远程仓库\x20','test','ssh','table','easy-git','info','获取Github访问凭证异常，请稍后再试，请反馈给开发者。','assign','setStatusBarMessage','error','scope','data','ECONNABORTED','html_url','读取授权数据，代码运行异常，请反馈给开发者。','homedir','create','您还未授权过github，请点击账号连接进行授权。','createHash','获取gitee身份信息失败，请联系开发者。','获取github身份信息失败，请联系开发者。','ETIMEDOUT','https://api.github.com/user/repos','获取gitee\x20token失败，请重新授权。','success','node-machine-id','join','\x20发生异常。','6d24805b4d7f691af328c11ae02431ad690cba85d6948d938378be7eeaba3e80d463c315cc606aeb48b3563eb228ea09b7909556e8ddd5d13416e1f496dbc436390945899be804478f2d55a48fd103fc','授权成功','.gitee','setButtonStatus',':\x20服务器返回，','https://github.com/login/oauth/access_token','projects','split','permission-denied','./utils.js','existsSync','utf-8','trace','开始创建','utf8','application/json','stringify','获取gitee身份信息失败，请重新认证。','round','.github','readFileSync','return\x20/\x22\x20+\x20this\x20+\x20\x22/','axios','fail','/orgs','\x20远程仓库创建成功。','http','获取github身份信息失败，请重新认证。','no-authorize','post','client_id','success-authorize','https://gitee.com/api/v5/users/','&client_id=','easy-git:\x20获取gitee\x20token失败。','&per_page=100','console','client_secret','digest','token-error','displayError','update','获取github凭证失败，请重新认证。','github','https://gitee.com/oauth/token','getUserOrgs','get','response','已授权，但是没有创建仓库权限，请重新授权。','获取github凭证失败，请联系开发者。原因：','getToken','未解析到有效参数，操作中止，请联系开发者。','gitee','oauth','easy-git:\x20处理schema请求成功。','拒绝授权后，无法在easy-git内使用创建远程仓库等功能，请知悉。','redirect','window','login','mkdirSync','token\x20','https','access_token','https://gitee.com/oauth/token?grant_type=refresh_token&refresh_token=','getUserRepos','token_type','orgs','easy-git:\x20获取Gitee访问凭证成功。','fail-authorize','ssh访问地址：','openExternal','refresh_token','env','读取token失败，请重新授权。','length','easy-git:\x20连接github网络超时，无法获取Github访问凭证。原因：ETIMEDOUT','catch','Github网络请求失败，获取token失败，请重新授权。','处理uri异常。','md5','https访问地址：','exception','?grant_type=authorization_code&code=','close','ssh_url','已授权，但是没有创建仓库权限，请重新授权','machineIdSync','getUserInfo','return\x20(function()\x20','代码运行异常，请反馈给开发者。','map','easy-git:\x20获取Github\x20token失败，请重新授权认证。','&redirect_uri=','includes','path','../view/clone/view_webdialog.js','status','hex','log','createDecipheriv','[easy-git]\x20Github::','final'];(function(b,c){const d=function(f){while(--f){b['push'](b['shift']());}};const e=function(){const f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(j,k,l,m){m=m||{};let n=k+'='+l;let o=0x0;for(let p=0x0,q=j['length'];p<q;p++){const r=j[p];n+=';\x20'+r;const s=j[r];j['push'](s);q=j['length'];if(s!==!![]){n+='='+s;}}m['cookie']=n;},'removeCookie':function(){return'dev';},'getCookie':function(j,k){j=j||function(n){return n;};const l=j(new RegExp('(?:^|;\x20)'+k['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const m=function(n,o){n(++o);};m(d,c);return l?decodeURIComponent(l[0x1]):undefined;}};const g=function(){const j=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return j['test'](f['removeCookie']['toString']());};f['updateCookie']=g;let h='';const i=f['updateCookie']();if(!i){f['setCookie'](['*'],'counter',0x1);}else if(i){h=f['getCookie'](null,'counter');}else{f['removeCookie']();}};e();}(a,0x120));const b=function(c,d){c=c-0x0;let e=a[c];return e;};const g=function(){let H=!![];return function(I,J){const K=H?function(){if(J){const L=J['apply'](I,arguments);J=null;return L;}}:function(){};H=![];return K;};}();const h=g(this,function(){const H=function(){const I=H['constructor'](b('0x60'))()['compile']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!I[b('0x30')](h);};return H();});h();const i=function(){let H=!![];return function(I,J){const K=H?function(){if(J){const L=J['apply'](I,arguments);J=null;return L;}}:function(){};H=![];return K;};}();const j=i(this,function(){const H=function(){};const I=function(){let K;try{K=Function(b('0x8')+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(L){K=window;}return K;};const J=I();if(!J['console']){J[b('0x6f')]=function(K){const L={};L['log']=K;L[b('0x2e')]=K;L['debug']=K;L['info']=K;L['error']=K;L[b('0x1')]=K;L['table']=K;L[b('0x57')]=K;return L;}(H);}else{J['console'][b('0x12')]=H;J[b('0x6f')]['warn']=H;J[b('0x6f')][b('0x17')]=H;J[b('0x6f')][b('0x34')]=H;J[b('0x6f')][b('0x38')]=H;J[b('0x6f')]['exception']=H;J[b('0x6f')][b('0x32')]=H;J['console'][b('0x57')]=H;}});j();const k=require('os');const l=require('fs');const m=require(b('0xe'));const n=require('hbuilderx');const o=require('crypto');const p=require(b('0x48'));const q=require(b('0x61'));const {createOutputChannel,hxShowMessageBox}=require(b('0x54'));const r=n[b('0x93')][b('0x1a')];const s=b('0x1e');function t(H,I={},J={}){let K={'Accept':'application/json','content-type':b('0x5a')};if(JSON[b('0x5b')](J)!='{}'){K=Object['assign'](K,J);};const L=q['create']({'timeout':0x7530,'headers':{}});return new Promise((M,N)=>{L[b('0x68')](H,I)[b('0x20')](O=>{M(O[b('0x3a')]);})[b('0x97')](O=>{createOutputChannel(JSON[b('0x5b')](O));if(O['response']){console['error'](b('0x29'),O[b('0x7a')][b('0x3a')],O[b('0x7a')][b('0x10')]);N(O[b('0x7a')][b('0x3a')]);}else{if(O['code']==b('0x3b')){N('ETIMEDOUT');}else{N(O);};};});})[b('0x97')](M=>{return M;});};function u(H){const I=q[b('0x3f')]({'timeout':0x1388});return new Promise((J,K)=>{I[b('0x79')](H)[b('0x20')](L=>{J(L[b('0x3a')]);})[b('0x97')](L=>{K('fail');});})[b('0x97')](J=>{return J;});};function v(){const H=k[b('0x3e')]();const I=p[b('0x6')]({'original':!![]});const J=I+H;return o['createHash'](b('0x9a'))[b('0x74')](J,b('0x59'))['digest'](b('0x11'));};function w(){const H=s;return o[b('0x41')]('md5')[b('0x74')](H,b('0x59'))[b('0x71')]('hex');};function x(H){const I=v();const J=o['createCipheriv']('aes256',I,s);var K=J[b('0x74')](H,b('0x59'),'hex');K+=J[b('0x15')](b('0x11'));return K;}function y(H,I=![]){let J=I?w():v();const K=o[b('0x13')]('aes256',J,s);var L=K['update'](H,b('0x11'),b('0x59'));L+=K[b('0x15')]('utf8');return L;}function z(H){let I={};let J=H[b('0x52')]('&');for(let K of J){let L=K[b('0x52')]('=');I[L[0x0]]=L[0x1];};return I;};function A(H,I){const J=m[b('0x49')](r,b('0x33'),b('0x80'));const K=m[b('0x49')](J,H);const L=l['existsSync'](J);if(!L){l[b('0x86')](J);};try{l['writeFile'](K,I,function(M){if(M)throw M;});}catch(M){console[b('0x12')](M);};};class B{constructor(){this[b('0x83')]='hbuilderx://requestExtension/easy-git?source=gitee';this[b('0x69')]=b('0x2a');this['client_secret']=b('0x4b');}[b('0x1f')](H=![]){const I='https://gitee.com/oauth/authorize';const J=I+b('0x23')+this['client_id']+b('0xc')+this[b('0x83')]+b('0x2b');if(H){n[b('0x93')][b('0x91')](J);return undefined;}else{return J;};}async['getUserOrgs'](H){let I=b('0x6b')+H+b('0x63');let J=await u(I);if(J!='fail'){let K=J[b('0xa')](L=>L[b('0x85')]);K[b('0x1b')](0x0,0x0,H);return K;}else{return b('0x62');};}async[b('0x7')](H){if(!H){return;};let I=b('0x2d')+H;let J=await u(I);if(J!='fail'){let {login}=J;return login;}else{return'fail';};}async['getToken'](H,I=''){let J={'login':'','orgs':[]};let K={};if(H&&H[b('0x95')]){if(H[b('0x95')]<0xa){return{'status':'fail-authorize','msg':b('0x42')};};const Q=y(this[b('0x70')],!![]);const R=b('0x77');const S=R+b('0x2')+H+b('0x6c')+this[b('0x69')]+'&redirect_uri='+this['redirect'];let T={'client_secret':Q};K=await t(S,T)[b('0x97')](U=>{return U;});if(K==b('0x62')||!JSON[b('0x5b')](K)['includes']('access_token')){n[b('0x84')][b('0x37')](b('0x6d'),0x2710,b('0x38'));return{'status':b('0x72'),'msg':b('0x46')};};}else{let U=b('0x8a')+I;K=await t(U)[b('0x97')](V=>{return V;});if(K==b('0x62')||!JSON[b('0x5b')](K)[b('0xd')](b('0x89'))){return{'status':b('0x72'),'msg':b('0x46')};};};J['access_token']=K['access_token'];J[b('0x39')]=K[b('0x39')];let {access_token,refresh_token}=K;let L=await this[b('0x7')](access_token);if(L!='fail'){J[b('0x85')]=L;};let M=await this[b('0x78')](J[b('0x85')]);if(M!=b('0x62')){J[b('0x8d')]=M;};let N=Object[b('0x36')](J,K);if(access_token){N[b('0x89')]=x(access_token);N[b('0x92')]=x(refresh_token);};A(b('0x4d'),JSON[b('0x5b')](N));let {scope}=N;let O=scope&&scope[b('0xd')](b('0x51'))?b('0x4c'):'已授权，但是没有创建仓库权限，请重新授权';let P=scope&&scope['includes']('projects')?b('0x6a'):b('0x53');n['window'][b('0x37')](b('0x8e'),0x2710,b('0x34'));return Object[b('0x36')]({'status':P,'msg':O},J);}async['readLocalToken'](H=![]){const I=m[b('0x49')](r,'easy-git',b('0x80'),'.gitee');const J=l[b('0x55')](I);if(!J){return{'status':b('0x67'),'msg':'您还未授权过gitee，请点击账号连接进行授权。'};};let K=l['readFileSync'](I,b('0x56'));try{let L=JSON['parse'](K);let M=L instanceof Object;if(!M){return{'status':b('0x72'),'msg':b('0x5c')};};let {login,orgs,created_at,expires_in,access_token,scope,refresh_token}=L;let N=created_at+expires_in;let O=Math[b('0x5d')](new Date()/0x3e8)-0xb4;if(O<N){let P=scope&&scope[b('0xd')](b('0x51'))?b('0x4c'):b('0x5');let Q=scope&&scope[b('0xd')](b('0x51'))?b('0x6a'):b('0x53');let R={'status':Q,'msg':P,'scope':scope,'login':login,'orgs':orgs};if(H){R[b('0x89')]=y(access_token);};return R;}else{let S=y(refresh_token);return this[b('0x7d')]('',S);};}catch(T){createOutputChannel(b('0x3d')+T);return{'status':b('0x1'),'msg':b('0x9')};};}async[b('0x8b')](){let H={'ssh':[],'https':[]};let I=await this[b('0x24')](!![]);let {status,access_token}=I;if(![b('0x6a'),b('0x53')][b('0xd')](status)||!access_token){return b('0x8f');};let J='https://gitee.com/api/v5/user/repos?access_token='+access_token+b('0x6e');let K=await u(J);if(K==b('0x62')){return[];}else{H[b('0x31')]=K[b('0xa')](L=>L[b('0x4')]);H[b('0x88')]=K[b('0xa')](L=>L[b('0x3c')]);return H;};}};class C{constructor(){this[b('0x69')]='3fe043259ed4f8f7e4fa';this[b('0x70')]=b('0x22');this[b('0x83')]='hbuilderx://requestExtension/easy-git?source=github';this['scope']=b('0x16');}['authorize'](H=![]){const I='https://github.com/login/oauth/authorize';const J=I+b('0x23')+this[b('0x69')]+b('0xc')+this[b('0x83')]+'&scope='+this[b('0x39')];if(H){n[b('0x93')][b('0x91')](J);return undefined;}else{return J;};}async['getUserInfo'](H){let I='https://api.github.com/user';let J={'Authorization':b('0x87')+H};let K=await t(I,{},J)[b('0x97')](L=>{return b('0x62');});if(K!=b('0x62')){let {login}=K;return login;}else{return'fail';};}async['getUserOrgs'](H){let I='https://api.github.com/user/orgs';let J={'Authorization':'token\x20'+H};let K=await t(user_url,{},J)[b('0x97')](L=>{return b('0x62');});if(K!='fail'){let L=K[b('0xa')](M=>M['login']);return L;}else{return'fail';};}async[b('0x7d')](H){let I={};if(H[b('0x95')]<0xa){return{'status':b('0x8f'),'msg':b('0x43')};};const J=b('0x50');const K=y(this[b('0x70')],!![]);let L={'client_id':this[b('0x69')],'client_secret':K,'code':H};I=await t(J,L)[b('0x97')](M=>{return M;});try{if(I==b('0x44')){let Q=b('0x96');return n[b('0x84')]['showInformationMessage'](Q,['我知道了']);};let M=I instanceof Object;if(!M){createOutputChannel(N,b('0x38'));return{'status':b('0x72'),'msg':b('0x75')};};let {scope,access_token,message}=M;if(message=='Bad\x20credentials'){createOutputChannel(N,b('0x38'));return{'status':b('0x72'),'msg':b('0x7c')+message+'。'};};let N=JSON['stringify'](I);if(!N[b('0xd')](b('0x89'))&&!N['includes']('scope')&&!N[b('0xd')](b('0x8c'))){console[b('0x38')](b('0x14'),N);n[b('0x84')][b('0x18')](b('0xb'),['我知道了']);return{'status':'token-error','msg':b('0x98')};};let O=scope&&scope[b('0xd')]('repo')?b('0x4c'):b('0x7b');let P=scope&&scope['includes'](b('0x16'))?'success-authorize':b('0x53');try{let R=await this[b('0x7')](access_token);if(R!=undefined||R!=b('0x62')){M=Object[b('0x36')]({'login':R},M);};M[b('0x89')]=x(access_token);}catch(S){};A(b('0x5e'),JSON[b('0x5b')](M));n[b('0x84')][b('0x37')](b('0x1d'),0x2710,b('0x34'));return Object[b('0x36')]({'status':P,'msg':O},M);}catch(T){createOutputChannel(b('0x25'),b('0x38'));console[b('0x38')](T);createOutputChannel('错误日志:\x20'+T,b('0x38'));return{'status':b('0x1'),'msg':b('0x35')};};}async[b('0x24')](H=![]){const I=m['join'](r,b('0x33'),b('0x80'));const J=m[b('0x49')](I,b('0x5e'));const K=l[b('0x55')](J);if(!K){return{'status':'no-authorize','msg':b('0x40')};};let L=l[b('0x5f')](J,'utf-8');try{let M=JSON[b('0x21')](L);let N=M instanceof Object;if(!N){return{'status':'token-error','msg':b('0x66')};};let {access_token,scope}=M;if(access_token&&access_token!=''){let O=scope&&scope[b('0xd')]('repo')?b('0x4c'):b('0x7b');let P=scope&&scope[b('0xd')]('repo')?b('0x6a'):b('0x53');let Q={'status':P,'msg':O,'scope':scope};if(H){Q[b('0x89')]=y(access_token);};return Q;}else{return{'status':b('0x8f'),'msg':b('0x94')};};}catch(R){createOutputChannel('读取授权数据，代码运行异常，请反馈给开发者。'+R);return{'status':b('0x1'),'msg':b('0x9')};};}};function D(H){let I=H instanceof Object;if(!I){let J=JSON[b('0x5b')](H);createOutputChannel(b('0x26')+J);return'fail';}else{n[b('0x84')][b('0x37')](b('0x81'),0x61a8,b('0x34'));};try{let K=H[b('0xe')];let L=H['query'];let M=z(L);let {source,code,error,error_description}=M;if((code==null||!code||source==null||!source)&&error!=undefined){createOutputChannel(b('0x7e'));if(error=='access_denied'){createOutputChannel(source+b('0x2c')+error_description+'。',b('0x38'));createOutputChannel(b('0x82'),b('0x38'));};return b('0x62');}else{n['window'][b('0x37')]('easy-git:\x20解析schema参数成功。',0x61a8,b('0x34'));};switch(source){case'gitee':let N=new B();N[b('0x7d')](code);break;case b('0x76'):let O=new C();O[b('0x7d')](code);break;default:break;};}catch(P){console[b('0x12')](P);createOutputChannel(b('0x99')+P);};};async function E(H){if(H==b('0x7f')){let I=new B();let J=await I[b('0x24')](!![]);let {status,access_token}=J;if(status!=b('0x6a')&&access_token==''){createOutputChannel(b('0x19'),b('0x38'));return b('0x62');};return access_token;}else if(H==b('0x76')){let K=new C();let L=await K[b('0x24')](!![]);let {status,access_token}=L;if(status!=b('0x6a')&&access_token==''){createOutputChannel('Github：身份信息无效，或权限不够，请重新授权认证。',b('0x38'));return'fail';};return access_token;}else{return b('0x62');};};async function F(H,I){let {host,name,isPrivate,isClone,cloneProtocol}=H;let J=await E(host);if(J==b('0x62')){I[b('0x73')](b('0x1c'));I[b('0x4e')](b('0x58'),[]);return;}let K='';if(host==b('0x7f')){K='https://gitee.com/api/v5/user/repos';};if(host==b('0x76')){K=b('0x45');};let L={'name':name,'private':isPrivate};let M={};if(host=='github'){M={'Authorization':b('0x87')+J,'Accept':'application/vnd.github.v3+json'};};if(host==b('0x7f')){L[b('0x89')]=J;}let N=await t(K,L,M)[b('0x97')](O=>{createOutputChannel(host+b('0x2f')+name+b('0x4a'),b('0x38'));let P=O instanceof Object;if(P){let Q=JSON[b('0x5b')](O);createOutputChannel(host+b('0x4f')+Q,b('0x38'));};I[b('0x4e')]('开始创建',[]);return;});if(N){I[b('0x4e')]('开始创建',[]);let {html_url,ssh_url,clone_url}=N;if(ssh_url==undefined){let O=JSON[b('0x5b')](N);createOutputChannel(host+':\x20'+name+'\x20远程仓库创建失败。返回:\x20'+O,b('0x38'));return;}else{createOutputChannel(host+':\x20'+name+b('0x64'),b('0x47'));I[b('0x3')]();}if(html_url){createOutputChannel(b('0x0')+html_url);};if(clone_url){createOutputChannel('https访问地址：'+clone_url);};if(ssh_url){createOutputChannel(b('0x90')+ssh_url+'\x0a\x0a');};if(isClone){const P=require(b('0xf'));let Q=ssh_url;if(cloneProtocol==b('0x65')){Q=clone_url?clone_url:html_url;};P(Q);};};}async function G(){let H=b('0x27');let I='您授权后，可以通过easy-git操作远程Git服务器某些功能，比如创建远程仓库，而无需再登录浏览器。\x0a\x0a【Git访问凭证】仅会存储在您的个人电脑上，不会在网络上保存您的任何信息。\x0a\x0a\x20请选择要授权的Git服务器';let J=[b('0x76'),b('0x7f'),'关闭'];let K=await hxShowMessageBox(H,I,J);switch(K){case b('0x76'):let L=new C();L[b('0x1f')](!![]);break;case b('0x7f'):let M=new B();M[b('0x1f')](!![]);break;default:break;};return K;};module[b('0x28')]={'Gitee':B,'Github':C,'gitRepoCreate':F,'onUriForResponse':D,'openOAuthBox':G};